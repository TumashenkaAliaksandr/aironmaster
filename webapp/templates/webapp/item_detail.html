{% extends 'main/base.html' %}
{% load static %}

{% block content %}
    <nav aria-label="breadcrumb" class="breadcrumb breadcrumps">
        <ol>
            <li><a href="{% url 'index' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li aria-current="page">{{ item.name }}</li>
        </ol>
    </nav>
    <div class="gradient-brcr"></div>
    <section id="screw" class="item-section">
        <div style="display: flex; gap: 30px; margin-top: 20px; flex-wrap: wrap;">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –≥–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ –∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã -->
            <div style="flex: 1 1 600px; max-width: 600px;">
                <!-- –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ -->
                <div class="main-photo-wrapper" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
                    <img id="main-photo" src="
                            {% if item.photos.first %}{{ item.photos.first.photo.url }}{% else %}{% static 'webapp/img/no_images.png' %}{% endif %}"
                         alt="{{ item.name }}" style="width: 100%; height: auto; display: block; object-fit: contain;">
                </div>

                <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã -->
                {% if item.photos.count > 1 %}
                    <div class="photo-margin-l" style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                        {% for photo in item.photos.all %}
                            <img src="{{ photo.photo.url }}" alt="{{ photo.description }}"
                                 class="thumbnail-photo"
                                 style="width: 142px; height: 100px; object-fit: cover; border-radius: 6px; cursor: pointer; border: 2px solid transparent;"
                                 data-full="{{ photo.photo.url }}">
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div style="flex: 1 1 700px; max-width: 700px;">
                <h3>{{ item.name }}</h3>

                <p>{{ item.description|safe }}</p>
                {#        <p>{{ item.description_more }}</p>#}

                {#        <p>#}
                {#        <img src="{% static 'webapp/icons/phone-volume-solid.svg' %}" alt="–¢–µ–ª–µ—Ñ–æ–Ω" width="16" height="16" class="phone-icon"/>#}
                {#            {% if item.phone1 %}#}
                {#                <a href="tel:{{ item.phone1|cut:' ' }}">{{ item.phone1 }}</a><br>#}
                {#            {% endif %}#}
                {#        <img src="{% static 'webapp/icons/phone-volume-solid.svg' %}" alt="–¢–µ–ª–µ—Ñ–æ–Ω" width="16" height="16" class="phone-icon"/>#}
                {#            {% if item.phone2 %}#}
                {#                <a href="tel:{{ item.phone2|cut:' ' }}">{{ item.phone2 }}</a>#}
                {#            {% endif %}#}
                {#        </p>#}
            </div>
        </div>
        <div class="screw-margin-li">
            <p>{{ item.description_more|safe }}</p>
            <p>
                <img src="{% static 'webapp/icons/phone-volume-solid.svg' %}" alt="–¢–µ–ª–µ—Ñ–æ–Ω" width="16" height="16"
                     class="phone-icon"/>
                {% if item.phone1 %}
                    <a href="tel:{{ item.phone1|cut:' ' }}">{{ item.phone1 }}</a><br>
                {% endif %}
                <img src="{% static 'webapp/icons/phone-volume-solid.svg' %}" alt="–¢–µ–ª–µ—Ñ–æ–Ω" width="16" height="16"
                     class="phone-icon"/>
                {% if item.phone2 %}
                    <a href="tel:{{ item.phone2|cut:' ' }}">{{ item.phone2 }}</a>
                {% endif %}
            </p>
        </div>
    </section>
    <div class="gradient-product-detail"></div>

    <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å–ø—Ä–∞–≤–∞ -->
    <section id="screw-img">
    <div id="contacts-with-item" class="contact-form-container">
        <div class="container">
            <div class="content-wrapper">
                <h2>üó£ –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨</h2>
                <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.</p>

                <form id="contact-form" action="" method="POST" novalidate>
                    {% csrf_token %}

                    {% if error_message %}
                        <div class="alert alert-danger" style="margin-bottom: 1rem;">
                            {{ error_message }}
                        </div>
                    {% endif %}

                    <div class="form-row-item">
                        <label for="{{ form.name.id_for_label }}">–ò–º—è</label>
                        {{ form.name.errors }}
                        {{ form.name }}
                    </div>

                    <div class="form-row-item">
                        <label for="{{ form.phone.id_for_label }}">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        {{ form.phone.errors }}
                        {{ form.phone }}
                    </div>

                    <div class="form-row-item">
                        <label for="{{ form.email.id_for_label }}">–ü–æ—á—Ç–∞</label>
                        {{ form.email.errors }}
                        {{ form.email }}
                    </div>

                    <div class="form-row-item">
                        <label for="{{ form.message.id_for_label }}">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        {{ form.message.errors }}
                        {{ form.message }}
                    </div>

                    <button type="submit" class="btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>
    </section>

    <div class="gradient-product-detail"></div>
    <section id="screw-spiral" class="item-section">
        <h2>üìå –ü–æ—Ö–æ–∂–∏–µ –ò–∑–¥–µ–ª–∏—è</h2>

        {% if items %}
            <div class="category-grid">
                {% for item in items %}
                    <div class="category-item">
                        {% with first_photo=item.photos.all|first %}
                            {% if first_photo %}
                                <img src="{{ first_photo.photo.url }}"
                                     alt="{{ first_photo.description|default:item.name }}" class="category-image"/>
                            {% else %}
                                <!-- –ï—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ—Ç, –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É -->
                                <img src="{% static 'webapp/img/no_images.png' %}" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
                                     class="category-image"/>
                            {% endif %}
                        {% endwith %}

                        <div class="category-content">
                            <div class="item-name">{{ item.name }}</div>
                            <a href="{% url 'item_detail' item.slug %}" class="btn btn-submit-two">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>–ò–∑–¥–µ–ª–∏—è –≤ –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
        {% endif %}
    </section>
    <div class="gradient-product-detail"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="customModal" class="custom-modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-content" role="document" tabindex="0" style="position: relative;">
            <button class="custom-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å"
                    style="position: absolute; top: 10px; right: 15px; font-size: 2rem; background: none; border: none; cursor: pointer;">
                &times;
            </button>
            <button class="custom-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
                    style="position: absolute; top: 50%; left: 0; transform: translateY(-50%); font-size: 2rem; background: none; border: none; cursor: pointer;">
                &#10094;
            </button>
            <div class="custom-image-wrapper" style="text-align:center; max-width: 90vw; max-height: 80vh;">
                <img id="customModalImage" src="" alt=""
                     style="max-width: 85%; max-height: 85%; border-radius: 8px; user-select: none;"/>
                <div id="customModalDescription" class="custom-description"
                     style="margin-top: 8px; color: #333; font-size: 1rem;"></div>
            </div>
            <button class="custom-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
                    style="position: absolute; top: 50%; right: 0; transform: translateY(-50%); font-size: 2rem; background: none; border: none; cursor: pointer;">
                &#10095;
            </button>
        </div>
    </div>



{% endblock %}
