{% extends 'main/base.html' %}
{% load custom_filters %}
{% load static %}


{% block content %}
    <nav aria-label="breadcrumb" class="breadcrumb breadcrumps">
        <ol>
            <li><a href="{% url 'index' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li aria-current="page">{{ service.name }}</li>
        </ol>
    </nav>
    <section class="custom-service-bg">
        <div class="service-detail-container">
            <h1 class="service-title">{{ service.name }}</h1>

            <!-- –°–ª–∞–π–¥–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            <section class="slider-section">
                <h2 class="section-title">[‚óâ¬∞] –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞—à–∏—Ö —Ä–∞–±–æ—Ç</h2>
                <div class="slider slider-photos" id="photoSlider">
                    <div class="slider-inner-wrapper">
                        {% for photo in photos %}
                            <div class="slide">
                                <img src="{{ photo.image.url }}" alt="{{ service.name }} —Ñ–æ—Ç–æ {{ forloop.counter }}"/>
                            </div>
                        {% empty %}
                            <div class="slide">
                                <img src="{% static 'webapp/img/no_images.png' %}" alt="–ù–µ—Ç —Ñ–æ—Ç–æ"/>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </section>


            <!-- –°–ª–∞–π–¥–µ—Ä –≤–∏–¥–µ–æ -->
            {% if videos.exists %}
                <section class="slider-section">
                    <h2 class="section-title">–í–∏–¥–µ–æ –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–∏–±–∫–∏</h2>
                    <div class="slider slider-videos" id="videoSlider">
                        {% for video in videos %}
                            <div class="slide">
                                <video controls preload="metadata" width="100%" height="auto">
                                    <source src="{{ video.url }}" type="video/mp4"/>
                                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                                </video>
                            </div>
                        {% endfor %}
                    </div>
                </section>
            {% endif %}

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ -->
            <section class="service-description">
                <h2 class="section-title">üìì –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</h2>
                {{ service.description|safe }}
            </section>

            <!-- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è -->
            <section class="technology-section">
                <h2 class="section-title">üèò –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è</h2>
                {{ service.technology|safe }}
            </section>


            <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ -->
            <section class="price-section">
                <h2 class="section-title">‚õÉ –°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏</h2>
                <table class="price-table">
                    <thead>
                    <tr>
                        <th>–¢–∏–ø –º–µ—Ç–∞–ª–ª–∞</th>
                        <th>–¢–æ–ª—â–∏–Ω–∞ –º–µ—Ç–∞–ª–ª–∞, –º–º</th>
                        <th>–°—Ç–æ–∏–º–æ—Å—Ç—å BYN (–±–µ–∑ –ù–î–°)</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for price in service.prices.all %}
                        <tr>
                            <td>
                                {% if price.metal_type %}
                                    {{ price.metal_type }}
                                {% else %}
                                    &mdash;
                                {% endif %}
                            </td>
                            <td>{{ price.thickness }}</td>
                            <td>{{ price.cost }}</td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="3">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </section>

            <div class="processing-metal-section">
                <p class="section-metal-title">‚úì –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–π –º–µ—Ç–∞–ª–ª</p>
            </div>
            <div class="processed-metals-wrapper" style="display: flex; gap: 20px; overflow-x: auto; margin-bottom: 22px">
                {% for metal in metals %}
                    <div class="metal-item" style="flex: 0 0 auto; text-align: center;">
                        {% if metal.photo %}
                            <img src="{{ metal.photo.url }}" alt="{{ metal.name }}"
                                 style="width: 120px; height: auto; border-radius: 8px;">
                        {% else %}
                            <div style="width: 120px; height: 100px; background: #eee; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                                [translate:–ù–µ—Ç —Ñ–æ—Ç–æ]
                            </div>
                        {% endif %}
                        <div style="margin-top: 8px;">{{ metal.name }}</div>
                    </div>
                {% endfor %}
            </div>



            <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
            <section class="advantages-section">
                <h2 class="section-title">üè≥ –ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h2>
                <ul class="advantages-list horizontal-list">
                    {% for adv in service.advantages.all %}
                        <li class="advantage-item">
                            <img src="{{ adv.icon.url }}" alt="{{ adv.text }}" class="advantage-icon" width="40"
                                 height="40"/>
                            <span>{{ adv.text }}</span>
                        </li>
                    {% empty %}
                        <li>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</li>
                    {% endfor %}
                </ul>
            </section>

            <!-- –í–∏–¥–µ–æ -->
            <section class="videos-section">
                <h2 class="section-title">üìΩ –í–∏–¥–µ–æ –ø–æ —Å–µ—Ä–≤–∏—Å—É</h2>
                <div class="videos-wrapper">
                    {% for video in service.videos.all %}
                        <video width="320" height="240" controls>
                            <source src="{{ video.video.url }}" type="video/mp4">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                        </video>
                        {% if video.title %}
                            <p>{{ video.title }}</p>
                        {% endif %}
                    {% empty %}
                        <p>–í–∏–¥–µ–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
                    {% endfor %}
                </div>
            </section>


        </div>
    </section>

    <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å–ø—Ä–∞–≤–∞ -->
    <section id="screw-img">
        <div id="contacts-with-item" class="contact-form-container">
            <div class="container">
                <div class="content-wrapper">
                    <h2>üó£ –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨</h2>
                    <p>–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.</p>

                    <form id="contact-form" action="" method="POST" novalidate>
                        {% csrf_token %}

                        {% if error_message %}
                            <div class="alert alert-danger" style="margin-bottom: 1rem;">
                                {{ error_message }}
                            </div>
                        {% endif %}

                        <div class="form-row-item">
                            <label for="{{ form.name.id_for_label }}">–ò–º—è</label>
                            {{ form.name.errors }}
                            {{ form.name }}
                        </div>

                        <div class="form-row-item">
                            <label for="{{ form.phone.id_for_label }}">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            {{ form.phone.errors }}
                            {{ form.phone }}
                        </div>

                        <div class="form-row-item">
                            <label for="{{ form.email.id_for_label }}">–ü–æ—á—Ç–∞</label>
                            {{ form.email.errors }}
                            {{ form.email }}
                        </div>

                        <div class="form-row-item">
                            <label for="{{ form.message.id_for_label }}">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            {{ form.message.errors }}
                            {{ form.message }}
                        </div>

                        <button type="submit" class="btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- –î—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏ -->
    <section class="custom-service-bg">
        <div class="services-inline-bg service-inline-container">
            <h2 class="section-title-services">÷é –î—Ä—É–≥–∏–µ —É—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
            <div class="services-inline-row">
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='laser-cutting' %}">
                        <img src="{% static 'webapp/img/aironmaster_lazer.png' %}" alt="–õ–∞–∑–µ—Ä–Ω–∞—è —Ä–µ–∑–∫–∞"
                             class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–õ–∞–∑–µ—Ä–Ω–∞—è —Ä–µ–∑–∫–∞</div>
                </div>
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='bending' %}">
                        <img src="{% static 'webapp/img/aironmaster_gibka.png' %}" alt="–ì–∏–±–∫–∞"
                             class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–ì–∏–±–∫–∞ –º–µ—Ç–∞–ª–ª–∞</div>
                </div>
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='vibratory-trowel' %}">
                        <img src="{% static 'webapp/img/aironmaster_vibrogoltovka_IFfETZG.jpeg' %}"
                             alt="–í–∏–±—Ä–æ–≥–æ–ª—Ç–æ–≤–∫–∞" class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–í–∏–±—Ä–æ–≥–æ–ª—Ç–æ–≤–∫–∞</div>
                </div>
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='welding' %}">
                        <img src="{% static 'webapp/img/aironmaster_svarka.png' %}" alt="–°–≤–∞—Ä–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã"
                             class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–°–≤–∞—Ä–∫–∞</div>
                </div>
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='metal-constructions' %}">
                        <img src="{% static 'webapp/img/aironmaster_truby.png' %}" alt="–ú–µ—Ç–∞–ª–ª–æ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"
                             class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–ú–µ—Ç–∞–ª–ª–æ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</div>
                </div>
                <div class="service-mini-card">
                    <a href="{% url 'service_detail' slug='polymer-painting' %}">
                        <img src="{% static 'webapp/img/aironmaster_pokraska.png' %}" alt="–ü–æ–ª–∏–º–µ—Ä–Ω–∞—è –ø–æ–∫—Ä–∞—Å–∫–∞"
                             class="service-mini-img"/>
                    </a>
                    <div class="service-mini-caption">–ü–æ–∫—Ä–∞—Å–∫–∞</div>
                </div>
            </div>
        </div>
    </section>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
<div id="imageModal">
  <button id="modalPrev" class="modal-nav" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">&#9664;</button>

  <img id="modalImage" src="" alt="" class="modal-image" />

  <button id="modalNext" class="modal-nav" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">&#9654;</button>
</div>


{% endblock %}
